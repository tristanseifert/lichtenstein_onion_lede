/dts-v1/;

#include "OMEGA2.dtsi"

/ {
	model = "Onion Omega2+ (Lichtenstein)";

	/* add the ethernet link and activity LEDs */
	gpio-leds {
		compatible = "gpio-leds";

		/* omega on-board system LED */
		system_led: system {
			gpios = <&gpio1 12 GPIO_ACTIVE_LOW>;
		};

		/* Ethernet activity LEDs */
		eth_link_led: ethlink {
			gpios = <&gpio0 18 GPIO_ACTIVE_HIGH>;
		};

		eth_act_led: ethact {
			gpios = <&gpio0 19 GPIO_ACTIVE_HIGH>;
		};

		/* status LEDs */
		status_0_led: status0 {
			gpios = <&expander 3 GPIO_ACTIVE_HIGH>;
		};
		status_1_led: status1 {
			gpios = <&expander 2 GPIO_ACTIVE_HIGH>;
		};
		status_2_led: status2 {
			gpios = <&expander 1 GPIO_ACTIVE_HIGH>;
		};
		status_3_led: status3 {
			gpios = <&expander 0 GPIO_ACTIVE_HIGH>;
		};
	};

	/* specify the 128M of memory on the Omega2+ */
	memory@0 {
		device_type = "memory";
		reg = <0x0 0x8000000>;
	};
};

/* define address of firmware in flash */
&firmware {
	reg = <0x50000 0x1fb0000>;
};

/* I2C bus expander (MCP23017) */
&i2c {
	expander: mcp23017@20 {
		/* force the kernel to match to a driver */
		status = "okay";

		/* MCP23017 driver */
		compatible = "microchip,mcp23017";
		#gpio-cells = <2>;

		gpio-controller;

		/* I2C address (all address pins low) */
		reg = <0x20>;

		/* IRQ configuration (this doesn't workâ€¦) */
		#interrupt-cells = <2>;
		interrupt-parent = <&gpio1>;
		interrupts = <2 2>;
		interrupt-controller;
		microchip,irq-mirror;
	};
};



/* assign labels to the system and Ethernet LEDs */
&system_led {
	label = "omega2_system_led";
};

&eth_link_led {
	label = "lichtenstein_ethlink_led";
};

&eth_act_led {
	label = "lichtenstein_ethact_led";
};


/* assign labels to the status LEDs */
&status_0_led {
	label = "lichtenstein_status0_led";
};
&status_1_led {
	label = "lichtenstein_status1_led";
};
&status_2_led {
	label = "lichtenstein_status2_led";
};
&status_3_led {
	label = "lichtenstein_status3_led";
};
