/dts-v1/;

#include "OMEGA2.dtsi"

/ {
	model = "Onion Omega2+ (Lichtenstein)";

	/* add the ethernet link and activity LEDs */
	gpio-leds {
		compatible = "gpio-leds";

		system_led: system {
			gpios = <&gpio1 12 GPIO_ACTIVE_LOW>;
		};

		eth_link_led: ethlink {
			gpios = <&gpio1 18 GPIO_ACTIVE_HIGH>;
		};

		eth_act_led: ethact {
			gpios = <&gpio1 19 GPIO_ACTIVE_HIGH>;
		};
	};

	/* specify the 128M of memory on the Omega2+ */
	memory@0 {
		device_type = "memory";
		reg = <0x0 0x8000000>;
	};
};

/* define address of firmware in flash */
&firmware {
	reg = <0x50000 0x1fb0000>;
};

/* I2C bus expander (MCP23017) */
&i2c {
	mcp23017@20 {
		/* force the kernel to match to a driver */
		status = "okay";

		/* MCP23017 driver */
		compatible = "microchip,mcp23017";
		#gpio-cells = <2>;

		gpio-controller;

		/* I2C address (all address pins low) */
		reg = <0x20>;

		/* IRQ configuration (this doesn't workâ€¦) */
		#interrupt-cells = <2>;
		interrupt-parent = <&gpio1>;
		interrupts = <2 2>;
		interrupt-controller;
		microchip,irq-mirror;
	};
};

/* give the LEDs some labels */
&system_led {
	label = "omega2_system_led";
};

&eth_link_led {
	label = "lichtenstein_ethlink_led";
};

&eth_act_led {
	label = "lichtenstein_ethact_led";
};
